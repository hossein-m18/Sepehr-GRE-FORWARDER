## ุฑุงู ุงูุฏุงุฒ ู ูุฏุฑุช ุขุณุงู ุชุงูู GRE + TCP FORWARDER
ุงุณฺฉุฑูพุช ุณูพูุฑ ุจุฑุง ุฑุงูโุงูุฏุงุฒ ู ูุฏุฑุช ุณุฑุน ู ุขุณุงู ุชููู GRE ู ูพูุฑุช ููุฑุงุฑุฏ ฺฉู ูุชูุงู ุจู ฺฉ ุง ฺูุฏ ุณุฑูุฑ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉุฑุฏุ ุจุง ุงุฏ ุฌุงู ูุฏุง ูููุ ุณูพูุฑ ุนุฒุฒ (ุณูพูุฑ ฺฉุฌุง ุจุงุจุงุ)

<img width="671" height="500" alt="image" src="https://github.com/user-attachments/assets/26040342-307c-45b2-97d5-eb1fbe1885f4" />

## ูฺฉุชู ุทูุง ูุจู ุงุฒ ุฑุงู ุงูุฏุงุฒ
ุฎู ุงุฒ ุฏูุณุชุงู ูุฑููุฏูุฏ ุงู ุฑูุด ูุณุฏูุฏ ุดุฏู ุง ูุงุจู ุงุณุชูุงุฏู ูุณุช! ุฏุฑ ุญุงู ุญุงุถุฑ ุงู ุฑูุด ุจู ุฑุงุญุช ุฑู ุณุฑูุฑูุง ุฌูุงุจ ูุฏู ูู ุจุงุฏ ุดุฑูุท ุชูุฒ ุจูุฏู ุง ูพ ู ุงุฑุชุจุงุท ุชูุฒ ุจู ุงุฑุงู ู ุฎุงุฑุฌ ุฑู ุฏุงุดุชู ุจุงุดุฏุ ูุง ุงู ุฑูุด ุฑู ุฑู ุณุฑูุฑูุง ูุฎุชูู ู ูุชุนุฏุฏ ุชุณุช ฺฉุฑุฏู ู ุจู ูุชุงุฌ ูุชูุงูุช ุฑุณุฏู.

ููฺฉูู ุณุฑูุฑ ุงุฑุงู ุง ุฎุงุฑุฌ ุดูุง ฺฉูุง GRE ุฑู ุจุณุชู ุจุงุดูุ ูุญุฏูุฏ ูู ุงูฺฉุงูุด ูุณุชุ ูู ุจู ุตูุฑุช ฺฉู GRE ุฏุฑ ุงฺฉุซุฑ ุดุจฺฉู ูุง ุฏุฑ ุงู ุจุงุฒู ุฒูุงู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ู ุฏุฑ ุงฺฉุซุฑ ููุงูุน ูุณุฆูู ุง ฺฉู ุจุงุนุซ ุนุฏู ุงุฑุชุจุงุท ุจู ุณุฑูุฑูุง ุดูุง ูุดู ุจูฺฉ ุจูุฏู ุง ูพ ุณุฑูุฑ ุดูุงุณุช.

ุชุฌุฑุจู ูุง ุฑู ุณุฑูุฑูุง ูุชูุงูุช ุจู ุดุฏุช ูุญุฏูุฏ ุงู ุฑู ุจู ูุง ูุดูู ุฏุงุฏู ฺฉู ููฺฉูู ุณุฑูุฑ ุงุฑุงู ุดูุง ฺฉ ุดุจฺฉู  ูุญุฏูุฏ ุฏุงุดุชู ุจุงุดู ู ุฑู ุงฺฉุซุฑ ุฑูุฌ ูุง ุฎุงุฑุฌ ุฏุชุง ุฑุฏ ูฺฉูู ุญุช ุงฺฏุฑ ูพูฺฏ icmp ุฑู ุฏุงุดุชู ุจุงุดุฏ ุงูุง ููฺฉู ูพฺฉุช ูุง ู ูพ ููุฏ ูุง ูุชูุงูุช ุจุง mtu ุจุงูุง ุฏุฑุฏุณุฑุณุงุฒ ุจุดู ู ุฏุชุง ุฑุฏ ูฺฉููุฏุ ุฏุฑ ุงู ุดุฑุงุท ุดูุง ุจุงุฏ ุญุชูุง ุจุฑุฏ ุณุฑุงุบ ุง ูพ ฺฉู ุจุง ุณุฑูุฑ ุงุฑุงู ุดูุง ุณูฺฉ ูุณุช ุง ุจุฑุนฺฉุณุ ููฺฉุดู ูุง ูุชูุงูุช ุชุฑ ุฑู ุชุณุช ฺฉูุฏุ ุจุฑุง ูุซุงู ูุง ุฑู ฺฉ ุดุจฺฉู  ุงุฑุงู ุจุง ูฺ ุฏุชุงุณูุชุฑ ุฎุงุฑุฌ ุจุง ููฺฉุดู ุงูฺฏูุณ ุงูฺฉุงู ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ูุฏุงุดุชูุ ูู ุจู ุฑุงุญุช ููู ุณุฑูุฑ ุจุง ููฺฉุดู ูุฑุงูุณู ุฏุฑ ุฑูุฌ ูุง ูุฎุชูู ุงุฑุชุจุงุท ุฏุฑุณุช ูฺฏุฑูุช ฺฉู ุงูู ุงุฒ ุนุฌุงุจ ูุงุฑูุงู ูุนู ูุณุช.


## ๐ ูุตุจ ู ุงุฌุฑุง


Socat Forwarder

    wget -O sepehr.sh "https://raw.githubusercontent.com/ToolSeRF/Sepehr-GRE-FORWARDER/main/sepehr.sh?$(date +%s)" && chmod +x sepehr.sh && bash sepehr.sh



HAProxy Forwarder

    wget -O sepehr-haproxy.sh "https://raw.githubusercontent.com/ToolSeRF/Sepehr-GRE-FORWARDER/refs/heads/main/sepehr-haproxy.sh?$(date +%s)" && chmod +x sepehr-haproxy.sh && bash sepehr-haproxy.sh

## ๐งญ ุณุงุฎุชุงุฑ ููู

### ุณูุช ุณุฑูุฑ ุฎุงุฑุฌ 2) KHAREJ SETUP

ุงุจุชุฏุง ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ุงุณฺฉุฑูพุช ุฑุง ุงุฌุฑุง ฺฉูุฏ.

ุจู ุณูุงูุงุช ุจู ุชุฑุชุจ ูพุงุณุฎ ุฏูุฏ.

1. ุฏุฑ GRE Number > ููุธูุฑ ุดูุงุฑู GRE ุงุณุช ฺฉ ุนุฏุฏ ุจู 1 ุชุง 9 ุงูุชุฎุงุจ ฺฉูุฏุ ุฏุฑ ูุฑ ุฏู ุณุฑูุฑ ฺฉุณุงู ุจุงุดุฏ.
2. ุง ูพ ุณุฑูุฑ ุฎุงุฑุฌ ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. ุง ูพ ุณุฑูุฑ ุงุฑุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ฺฉ ุง ูพ ูพุฑุงูุช ุงูุชุฎุงุจ ฺฉูุฏุ ูุซูุง 10.245.245.0 ุ ุฏุฑ ูุฑ ุฏู ุณุฑูุฑ ฺฉุณุงู ุจุงุดุฏ.


### ุชูุธูุงุช ุณูุช ุณุฑูุฑ ุงุฑุงู 1) IRAN SETUP

1. ุฏุฑ GRE Number > ููุงู ฺฉู ุฏุฑ ุฎุงุฑุฌ ุฒุฏุฏ ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ.
2. ุง ูพ ุณุฑูุฑ ุงุฑุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ.
3. ุง ูพ ุณุฑูุฑ ุฎุงุฑุฌ ุฑุง ูุงุฑุฏ ฺฉูุฏ.
4. ฺฉ ุง ูพ ูพุฑุงูุช ุงูุชุฎุงุจ ฺฉูุฏุ ูุดุงุจู ููุงู ฺฉู ุณูุช ุฎุงุฑุฌ ูุงุฑุฏ ฺฉุฑุฏุฏ.
5. ูพูุฑุช ูุง ูพูู ู ุงูุจุงูุฏ (ูุฑูพูุฑุช ฺฉู ูุงุฒ ุจู ุชุงูู ุขู ุฏุงุฑุฏ) ุฑุง ูุงุฑุฏ ฺฉูุฏุ ูุซูุง 2052,2053 ุง ุจุฑุง ุฑูุฌ ุฎุงุต 2050-2060 ุฑุง ูุงุฑุฏ ฺฉูุฏ

## ูฺฉุชู
ุฏุฑ ุงู ุงุณฺฉุฑูพุช TCP ููุฑูุงุฑุฏ ุงูุฌุงู ูุดูุฏุ ุงฺฏุฑ ูุงุฒ ุจู ููุฑูุงุฑุฏ ูพูุฑุช UDP ุฏุงุฑุฏ ุงุฒ ูุฑฺู Socat ุงุณุชูุงุฏู ฺฉูุฏ.

ุจุนุฏ ุงุฒ ุงูุฌุงู ูุฑุงุญู ุชุงูููฺฏ ุจุง ุฏุณุชูุฑ

    ls -la /etc/systemd/system | grep -E 'gre[0-9]+\.service|fw-gre' 

ูุณุช ุณุฑูุณ ูุง ุณุงุฎุชู ุดุฏู ุฑู ุฏุฑุงูุช ฺฉูุฏ.

ุณูพุณ ูุฑ ุณุฑูุณ ุจุง fw-gre* ุฑุง ูุฑุงุด ฺฉูุฏ.

ูุซูุง ุจุฑุง ูพูุฑุช 80 ู gre1 ุจู ุงู ุดฺฉู ุงุณุช.

ูุงู /etc/systemd/system/fw-gre1-80.service ุฑุง ุจุง ูุฑุงุดฺฏุฑ ุจุงุฒ ูฺฉูุฏ ู ุฏุฑ ุฎุท ExecStart ููุงุฏุฑ TCP ุฑุง ุจู UDP ุชุบุฑ ุฏูุฏ

ู ุฏุฑ ุงูุชูุง systemctl daemon-reload ู systemctl restart fw-gre* ุฑุง ุจุฒูุฏ.


### ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ูพูุฑุช ุฌุฏุฏ 5 > add tunnel port

ุจู ุฏุฑุฎูุงุณุช ุฏูุณุชุงู ูุงุจูุช ุงุถุงูู ฺฉุฑุฏู ูพูุฑุช ุฌุฏุฏ ุฑู ุจู ุงุณฺฉุฑูพุช ุงุถุงูู ฺฉุฑุฏูุ ุจุง ุงูุชุฎุงุจ ฺฏุฒูู 5 ู ุณูพุณ ุดูุงุฑู GRE ูุฏ ูุธุฑ ุฎูุฏุชูู ู ุชููุฏ ูพูุฑุช ุฌุฏุฏ ุฑู ุงุถุงูู ฺฉูุฏ.



### ุจุฑุง ูุฏุฑุช ุณุฑูุณ ูุง 3) Services ManageMent

ุงุฒ ูุณุช GRE ูุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ู ุจุฑุง ูุฏุฑุช ูพูุฑุช ูุง ููุฑูุงุฑุฏ ุดุฏู ุงุฒ Forward ุงุณุชูุงุฏู ฺฉูุฏ.

### ุญุฏู ู ูพุงฺฉุณุงุฒ 4) Unistall & Clean

ุงุฒ ุงู ููู ูุชูุงูุฏ ุจุฑุง ุญุฐู ู ูพุงฺฉุณุงุฒ ุชุงูู ูุง ุณุงุฎุชู ุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ

## ูุณุช ุณุฑูุณ ูุง
ุจุฑุง ุฏุฑุงูุช ูุณุช ุณุฑูุณ ูุง ุจู ุตูุฑุช ุฏุณุช ุงุฒ ls -la /etc/systemd/system | grep -E 'gre[0-9]+\.service|fw-gre' ุงุณุชูุงุฏู ฺฉูุฏ

## ุญูุงุช
ุฌูุช ุญูุงุช ููุท ุจุฑุง ุขุฑุงูุด ุฑูุญ ูพุงฺฉ ุณูพูุฑ ุนุฒุฒ ู ุชูุงู ุนุฒุฒุงู ุฌุงู ูุฏุง ุงูููุงุจ ุฏ 1404 ุงุฑุงู ุนุฒุฒูุงู ุฏุนุง ฺฉูุฏ


